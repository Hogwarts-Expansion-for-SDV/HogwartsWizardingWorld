{
  "Changes": [
    /*Acacia*/
    {
      "LogName": "Hogwarts Upgrade Book 1 Acacia Object Data",
      "Action": "EditData",
      "Target": "Data/Objects",
      "Entries": {
        "{{ModId}}_AcaciaUpgradeBook1": {
          "Name": "Upgrade Book Acacia",
          "DisplayName": "Upgrade Book Acacia i18n name",
          "Description": "Upgrade Book Acacia i18n description",
          "Type": "Quest",
          "Category": 0,
          "Price": 50,
          "Texture": "{{InternalAssetKey: assets/Objects/Artifacts.png}}",
          "SpriteIndex": 14,
          "ContextTags": [
            "{{ModId}}_UpgradeBook"
          ]
        }
      }
    },
    {
      "LogName": "Hogwarts Acacia Upgrade Book 1 ConsumeForTriggerAction",
      "Action": "EditData",
      "Target": "spacechase0.SpaceCore/ObjectExtensionData",
      "Entries": {
        "{{ModId}}_AcaciaUpgradeBook1": {
          "UseForTriggerAction": true,
          "ConsumeForTriggerAction": true
        }
      },
      "When": {
        "HasMod |contains= spacechase0.SpaceCore, Spiderbuttons.BETAS": true
      }
    },
    {
      "LogName": "Hogwarts Acacia Upgrade Book Trigger Action No Wand",
      "Action": "EditData",
      "Target": "Data/TriggerActions",
      "Entries": {
        "{{ModID}}_AcaciaUpgradeBookNoWand": {
          "Id": "{{ModID}}_AcaciaUpgradeBookNoWand",
          "Condition": "!PLAYER_HAS_ITEM Current (W){{ModId}}_AcaciaWand, ITEM_ID Input {{ModId}}_AcaciaUpgradeBook1",
          "Trigger": "spacechase0.SpaceCore_OnItemUsed",
          "Actions": [
            "spacechase0.SpaceCore_ShowHudMessage \"Wand Required\"",
            "AddItem {{ModId}}_AcaciaUpgradeBook1"
          ],
          "MarkActionApplied": false
        }
      },
      "When": {
        "HasMod |contains= spacechase0.SpaceCore, Spiderbuttons.BETAS": true
      }
    },
    {
      "LogName": "Hogwarts Acacia Upgrade Book 1 Trigger Action Setup",
      "Action": "EditData",
      "Target": "Data/TriggerActions",
      "Entries": {
        "{{ModID}}_AcaciaUpgradeBook1Setup": {
          "Id": "{{ModID}}_AcaciaUpgradeBook1Setup",
          "Condition": "PLAYER_HAS_ITEM Current (W){{ModId}}_AcaciaWand, ITEM_ID Input {{ModId}}_AcaciaUpgradeBook1",
          "Trigger": "spacechase0.SpaceCore_OnItemUsed",
          "Actions": [
            "AddMail Current {{ModId}}_AcaciaUpgradeBook1 Received",
            "Spiderbuttons.BETAS_DelayedAction \"RemoveItem {{ModId}}_AcaciaWand\" 10000",
            "Spiderbuttons.BETAS_DelayedAction \"AddItem {{ModId}}_AcaciaWand\" 10000"
          ],
          "MarkActionApplied": true
        }
      },
      "When": {
        "HasMod |contains= spacechase0.SpaceCore, Spiderbuttons.BETAS": true
      }
    },
    {
      "LogName": "Acacia Wand Upgrade Test 1",
      "Action": "EditData",
      "Target": "Data/Weapons",
      "TargetField": [
        "{{ModId}}_AcaciaWand",
        "Projectiles",
        "Diagonal Left"
      ],
      "Entries": {
        "Damage": "{{Query: {{Random: {{Range: 30, 50}}}}}}",
        "MaxDistance": 10
      },
      "When": {
        "HasFlag |contains= {{ModId}}_AcaciaUpgradeBook1": true
      },
      "Update": "OnLocationChange, OnTimeChange"
    },
    {
      "LogName": "Acacia Wand Upgrade Test 2",
      "Action": "EditData",
      "Target": "Data/Weapons",
      "TargetField": [
        "{{ModId}}_AcaciaWand",
        "Projectiles",
        "Diagonal Right"
      ],
      "Entries": {
        "Damage": "{{Query: {{Random: {{Range: 30, 50}}}}}}",
        "MaxDistance": 10
      },
      "When": {
        "HasFlag |contains= {{ModId}}_AcaciaUpgradeBook1": true
      },
      "Update": "OnLocationChange, OnTimeChange"
    }
    /*Wand Upgrade Test
    {
      "LogName": "Replace wand sprites",
      "Action": "EditData",
      "Target": "Data/Weapons",
      "Fields": {
        "{{ModId}}_Wand_{{Merge: {{HasFlag}}|inputSeparator=HOGWARTSWANDSTATS|valueAt=1}}": {
          "SpriteIndex": "{{Merge: {{HasFlag}}|inputSeparator=HOGWARTSWANDSPRITE|valueAt=1}}"
        }
      },
      "When": {
        "Query: {{Count:{{Merge: {{HasFlag}}}}|inputSeparator=HOGWARTSWANDSPRITE}} > 1 AND {{Count:{{Merge: {{HasFlag}}}}|inputSeparator=HOGWARTSWANDSTATS}} > 1": true
      },
      "Update": "OnLocationChange"
    }*/
  ]
}